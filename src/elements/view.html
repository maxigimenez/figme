<dom-module is="figme-item-view">

    <template>

        <style>
            .view {
                position: absolute;
                z-index: 1000;
                top: 0;
                width: 100%;
                background-color: rgba(0, 0, 0, 0.9);
            }

            .view ._actions {
                margin-top: -5px;
                color: #fff;
            }

            .view iron-image {
                width: 100%;
                height: 250px;
            }

            paper-tooltip {
                --paper-tooltip-background: #47A6F7;
            }
        </style>

        <div class="view" hidden$="{{ !isShown }}">

            <iron-image
                preload
                fade
                sizing="contain"
                src="{{ item.images.original.url }}"
                on-tap="copy"></iron-image>

            <div class="_actions">
                <paper-icon-button class="clipboard" id="content-copy" icon="content-copy"></paper-icon-button>
                <paper-icon-button class="clipboard" id="code" icon="code"></paper-icon-button>
                <paper-icon-button id="file-download" icon="file-download" on-tap="download"></paper-icon-button>

                <paper-tooltip for="content-copy" position="right">Copy to clipboard</paper-tooltip>
                <paper-tooltip for="code" position="right">Copy as Markdown code</paper-tooltip>
                <paper-tooltip for="file-download" position="right">Download image</paper-tooltip>
            </div>

        </div>

    </template>

    <script>
        Polymer({
            is: 'figme-item-view',
            properties: {
                item: Object,
                isShown: {
                    type: Boolean,
                    value: false
                }
            },
            show: function() {
                this.isShown = true;
                ga('send', 'event', 'Preview', 'show', this.item.id);
            },
            hide: function() {
                this.isShown = false;
            },
            download: function() {
                var link = document.createElement('a');
                link.download = null;
                link.href = this.item.images.original.url;
                link.click();
                ga('send', 'event', 'Copy', 'Download', this.item.id);
            },
            copy: function() {
                this.querySelector('#content-copy').click();
            }
        });
    </script>

</dom-module>
