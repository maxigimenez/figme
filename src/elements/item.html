<dom-module is="figme-item">

    <style>
        :host {
            float: left;
            width: 20%;
            margin-bottom: -5px;
        }

        paper-tooltip {
            font-family: 'Roboto', 'Noto', sans-serif;
            --paper-tooltip-background: black;
        }

        iron-image {
            width: 100%;
            height: 200px;
        }

        .item {
            position: relative;
        }
    </style>

    <template>

        <div class="item">

            <iron-image
                preload
                fade
                sizing="cover"
                src="{{ item.images.original_still.url }}"></iron-image>

            <figme-item-view item="{{ item }}"></figme-item-view>

        </div>

    </template>

    <script>
        Polymer({
            is: 'figme-item',
            properties: {
                item: Object
            },
            ready: function() {
                this.item.markdown = '!['+this.item.source_tld+']('+this.item.images.original.url+')';
                this._attachWatchers();
            },
            _attachWatchers: function() {
                var element = this.querySelector('.item');
                var view = this.querySelector('figme-item-view');
                element.addEventListener('mouseover', function(event) {
                    view.show();
                });
                element.addEventListener('mouseout', function(event) {
                    view.hide();
                });
            }
        });
    </script>

</dom-module>
